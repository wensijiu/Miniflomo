# 微默 (Weimo) - 产品需求文档 PRD

## 📋 项目概述

### 项目背景
"微默"是一个 Flomo 风格的极简碎片化想法收集器，核心理念是"微小坚持，默默生长"。旨在帮助用户快速记录生活中的灵感、思考和感悟，并通过数据可视化增强用户的成就感和坚持动力。

### 产品定位
- **类型**：微信小程序风格的 Web 应用
- **目标用户**：需要记录碎片化想法、追求个人成长的用户
- **核心价值**：快速记录 + 标签管理 + 数据统计 + 回顾提醒

### 设计理念
- **极简主义**：Notion 风格的克制美学，纯文字为主，功能性图标点缀
- **扁平结构**：不设子标签，保持简单性
- **成就激励**：类似 Apple Watch 三环的数据可视化设计

---

## 🎨 设计系统

### 配色方案（Notion 风格）

#### 主色系
- **主色 (Primary)**: `#37352F` - 深灰黑，用于文字、图标、主按钮
- **主色前景 (Primary Foreground)**: `#FFFFFF` - 白色，主按钮文字

#### 背景色系
- **背景 (Background)**: `#FFFFFF` - 纯白
- **次要背景 (Secondary)**: `#F7F6F3` - 浅米灰
- **强调背景 (Accent)**: `#EDECE9` - 浅灰

#### 文字色系
- **主文字 (Foreground)**: `#37352F` - 深灰黑
- **次要文字 (Muted Foreground)**: `#9B9A97` - 中灰

#### 功能色
- **错误/删除 (Destructive)**: `#EB5757` - 红色
- **边框 (Border)**: `rgba(55, 53, 47, 0.09)` - 浅灰边框

### 字体规范
- **基础字号**: `16px`
- **字重**:
  - Normal: `400`
  - Medium: `500`

### 圆角规范
- **基础圆角**: `10px` (0.625rem)
- **小圆角**: `6px` (--radius-sm)
- **中圆角**: `8px` (--radius-md)
- **大圆角**: `10px` (--radius-lg)
- **超大圆角**: `14px` (--radius-xl)
- **按钮圆角**: `9999px` (rounded-full)
- **卡片圆角**: `16px` (rounded-2xl)

### 间距规范
- **页面水平边距**: `16px` (px-4)
- **卡片内边距**: `20px` (p-5)
- **元素间距**: `12px` (gap-3)
- **小间距**: `8px` (gap-2)

### 滚动条
- 全局隐藏滚动条（保留滚动功能）

---

## 🏗️ 技术架构

### 技术栈
- **框架**: React 18 + TypeScript
- **样式**: Tailwind CSS v4
- **构建工具**: Vite
- **动画**: Motion (Framer Motion)
- **图标**: Lucide React
- **图片格式**: PNG（不使用 SVG）
- **图片工具**: Unsplash API（通过 unsplash_tool）
- **数据持久化**: LocalStorage
- **组件库**: Shadcn UI (部分组件)

### 图片使用规范

#### ⚠️ 重要：只使用 PNG 格式
- **禁止使用 SVG 格式**
- **所有图片必须是 PNG 格式**
- **使用 `unsplash_tool` 获取图片**
- **使用 `ImageWithFallback` 组件展示图片**

#### 获取图片示例
```tsx
// 使用 unsplash_tool 获取图片
const imageUrl = await unsplash_tool({ query: "minimalist workspace" });

// 使用 ImageWithFallback 组件
import { ImageWithFallback } from '@/app/components/figma/ImageWithFallback';

<ImageWithFallback 
  src={imageUrl}
  alt="描述"
  className="w-full h-48 object-cover rounded-2xl"
/>
```

### 项目结构
```
/src
  /app
    /components
      - QuickInputPage.tsx       # 快速输入页
      - NoteListPage.tsx         # 笔记浏览页
      - TagsPage.tsx             # 标签管理页
      - ProfilePage.tsx          # 个人中心页
      - RandomReviewPage.tsx     # 随机回顾页
      - StatsPage.tsx            # 数据统计页
      - CalendarPage.tsx         # 记录日历页
      - GoalSettings.tsx         # 目标设置
      - ReminderSettingsPage.tsx # 回顾提醒设置页
      - AboutPage.tsx            # 关于微默页
      - HelpPage.tsx             # 帮助与反馈页
      - NotionDashboardV4.tsx    # 个人中心数据面板
      - TabBar.tsx               # 底部导航栏
      - NoteCard.tsx             # 笔记卡片组件
      /figma
        - ImageWithFallback.tsx  # 图片组件（必须使用）
      /ui                        # UI 基础组件
    - App.tsx                    # 主应用
  /styles
    - theme.css                  # 主题配置
    - fonts.css                  # ��体引入
```

### 数据结构

#### Note (笔记)
```typescript
interface Note {
  id: string;              // 唯一标识
  content: string;         // 笔记内容
  tags: string[];          // 标签数组
  timestamp: number;       // 时间戳 (Date.now())
}
```

#### Goals (目标)
```typescript
interface Goals {
  streakGoal: number;      // 连续记录目标（天）
  weeklyGoal: number;      // 每周记录目标（条）
  totalGoal: number;       // 总记录目标（条）
}
```

#### ReminderSettings (提醒设置)
```typescript
interface ReminderSettings {
  enabled: boolean;        // 是否开启提醒
  time: string;            // 提醒时间 (HH:mm 格式)
  frequency: 'daily' | 'workdays' | 'weekends'; // 提醒频率
}
```

### LocalStorage 存储键
- `weimo-notes`: 笔记数据数组
- `weimo-goals`: 目标设置对象
- `weimo-reminder-settings`: 提醒设置对象

---

## 📱 功能模块

### 1. 快速输入页 (QuickInputPage)

#### 功能描述
用户快速记录想法的核心页面

#### 页面结构
1. **顶部导航栏**
   - 高度: `56px` (h-14)
   - 居中显示: "微默"
   - 底部边框分隔

2. **主输入区域**
   - 自适应高度的 textarea
   - 居中对齐
   - Placeholder: "发生了什么？想到什么？记下来..."
   - 最大高度: `60vh`

3. **已选标签展示区**
   - 水平展示已添加的标签
   - 每个标签可点击删除（× 按钮）
   - 标签样式: 浅色背景 + 主色文字 + 圆角

4. **标签选择区**
   - **标签视图切换**: "常用" / "最近" 两个 Tab
   - **快捷标签**: 
     - 显示 3-4 个标签（根据标签长度智能调整）
     - 已选中标签高亮显示
   - **手动输入**:
     - 前置 # 符号
     - Placeholder: "或手动输入标签..."
     - 支持 Enter 添加
     - 支持 Backspace 删除最后一个标签

5. **发送按钮**
   - 宽度: 100%
   - 高度: `48px` (h-12)
   - 圆角: 完全圆角 (rounded-full)
   - 主色背景 + 白色文字
   - 图标: Send + "发送"
   - 无内容时禁用状态

#### 交互逻辑
- 点击快捷标签添加/移除
- 手动输入标签支持 Enter 确认
- 提交后清空输入框和标签
- 提交成功显示 Toast 提示 "已保存"（2秒后消失）

---

### 2. 笔记浏览页 (NoteListPage)

#### 功能描述
以时间轴形式展示所有笔记，支持标签筛选和删除操作

#### 页面结构
1. **顶部导航栏**
   - 左侧: 标题 "回顾"
   - 右侧: 统计信息（总笔记数 + 总标签数）

2. **标签筛选区** (可选显示)
   - 横向滚动标签列表
   - "全部" 标签始终在第一位
   - 选中标签高亮

3. **笔记时间轴**
   - 按日期分组展示
   - 日期标题格式: "今天" / "昨天" / "MM月DD日"
   - 每组内按时间倒序

#### 笔记卡片 (NoteCard)
- **内容**: 笔记文字
- **标签**: 横向展示，可点击筛选
- **时间**: 相对时间（刚刚 / X分钟前 / X小时前 / X天前）
- **删除方式**:
  - **左滑删除**: 向左滑动卡片，显示红色删除按钮，点击确认删除
  - **菜单删除**: 点击右上角三点菜单，选择删除
- **编辑功能**: 双击卡片或点击菜单中的编辑按钮，进入全屏编辑模式

#### 空状态
- 无笔记时显示引导文案
- 无标签筛选结果时显示提示

---

### 3. 标签管理页 (TagsPage)

#### 功能描述
展示所有标签及其统计信息，支持查看标签下的所有笔记

#### 页面结构
1. **顶部导航栏**
   - 居中标题: "标签"

2. **标签列表**
   - 网格布局 (2列)
   - 每个标签卡片显示:
     - 标签名称 (# 前缀)
     - 笔记数量
   - 点击查看该标签下的所有笔记

3. **标签详情页**
   - 返回按钮
   - 标签名称
   - 笔记列表（时间倒序）
   - 支持左滑删除笔记

#### 数据统计
- 自动统计每个标签的笔记数量
- 按笔记数量倒序排列
- 显示总标签数

---

### 4. 个人中心页 (ProfilePage)

#### 功能描述
展示用户信息、数据统计和功能入口

#### 页面结构
1. **顶部导航栏**
   - 居中标题: "我的"

2. **用户信息卡片**
   - 头像: 📝 emoji 图标 + 浅色背景圆形
   - 昵称: "微信用户"
   - 签名: "记录生活，连接思考"

3. **数据面板** (NotionDashboardV4)
   - **三环进度图**:
     - 连续记录天数（蓝色环）
     - 本周记录条数（绿色环）
     - 总记录条数（橙色环）
   - **数据卡片**:
     - 总笔记数
     - 总标签数
     - 连续天数
     - 平均每日记录数
   - 简洁的 Notion 风格设计

4. **随机回顾按钮**
   - 渐变背景卡片
   - 图标: Shuffle
   - 标题: "随机回顾"
   - 副标题: "重温过往的思考"

5. **功能菜单**
   - **第一组**:
     - 目标设置 (Target)
     - 数据统计 (TrendingUp)
     - 记录日历 (Calendar)
     - 回顾提醒 (Bell)
   - **第二组**:
     - 关于微默 (Info)
     - 帮助与反馈 (HelpCircle)

#### MenuItem 样式
- 图标 + 标题 + 描述（可选）+ 右箭头
- 悬停效果: 浅色背景
- 分组之间有间距

---

### 5. 随机回顾页 (RandomReviewPage)

#### 功能描述
随机展示一条历史笔记，帮助用户回顾过往思考

#### 页面结构
1. **顶部导航栏**
   - 左侧: 关闭按钮 (X)
   - 居中: "随机回顾"

2. **笔记卡片**
   - 居中展示
   - 笔记内容
   - 标签列表
   - 记录时间

3. **底部操作区**
   - "换一条" 按钮（主按钮样式）

#### 交互逻辑
- 打开时随机选择一条笔记
- 点击"换一条"重新随机选择
- 无笔记时显示空状态

---

### 6. 数据统计页 (StatsPage)

#### 功能描述
详细展示用户的记录数据和统计图表

#### 页面结构
1. **顶部导航栏**
   - 左侧: 返回按钮
   - 居中: "数据统计"

2. **总览卡片**
   - 总笔记数
   - 总标签数
   - 连续记录天数
   - 最常用标签

3. **趋势图表**
   - 最近 7 天记录趋势（柱状图）
   - 每日平均记录数

4. **标签分布**
   - Top 5 标签及其笔记数量
   - 进度条可视化

---

### 7. 记录日历页 (CalendarPage)

#### 功能描述
以日历形式展示记录历史，支持查看特定日期的笔记

#### 页面结构
1. **顶部导航栏**
   - 左侧: 返回按钮
   - 居中: "记录日历"

2. **月份切换**
   - 上一月 / 下一月按钮
   - 当前月份显示

3. **日历视图**
   - 标准月历布局
   - 有记录的日期高亮
   - 显示当日记录数量

4. **日期详情**
   - 点击日期查看当天所有笔记
   - 笔记列表（时间顺序）

---

### 8. 目标设置页 (GoalSettings)

#### 功能描述
用户自定义三个周期目标

#### 页面结构
1. **弹窗样式**
   - 圆角卡片 (rounded-3xl)
   - 半透明黑色遮罩

2. **表单项**
   - **连续记录目标**: 
     - 单位: 天
     - 默认: 7 天
     - 最小: 1 天
   - **每周记录目标**:
     - 单位: 条
     - 默认: 10 条
     - 最小: 1 条
   - **总记录目标**:
     - 单位: 条
     - 默认: 100 条
     - 最小: 1 条

3. **操作按钮**
   - 取消（灰色）
   - 保存（主色）

#### 数据持久化
- 保存到 LocalStorage (`weimo-goals`)
- 实时更新个人中心的三环进度

---

### 9. 回顾提醒设置页 (ReminderSettingsPage)

#### 功能描述
设置每日回顾提醒时间和频率

#### 页面结构
1. **顶部导航栏**
   - 左侧: 返回按钮
   - 居中: "回顾提醒"

2. **开关**
   - 启用/关闭提醒功能

3. **时间选择**
   - 时间选择器（HH:mm 格式）
   - 默认: 21:00

4. **频率选择**
   - 单选按钮组:
     - 每天
     - 仅工作日
     - 仅周末

5. **保存按钮**
   - 固定在底部
   - 主按钮样式

#### 数据持久化
- 保存到 LocalStorage (`weimo-reminder-settings`)

---

### 10. 关于微默页 (AboutPage)

#### 功能描述
展示应用介绍、版本信息和核心功能

#### 页面结构
1. **顶部导航栏**
   - 左侧: 关闭按钮 (X)
   - 居中: "关于微默"（纯文字，无 emoji）

2. **版本信息**
   - 应用名称: "微默 Weimo"
   - 版本号: v1.0.0 • 2026.01
   - Slogan: "微小坚持，默默生长"

3. **核心功能** (FeatureItem)
   - 功能项格式: 小 emoji (text-base) + 标题 + 描述
   - 功能列表:
     - ✍️ 快速记录 - 随时捕捉灵感
     - 🏷️ 标签管理 - 有序组织想法
     - 📊 数据统计 - 可视化你的成长
     - 🔔 回顾提醒 - 定时重温思考

4. **操作按钮**
   - 访问官网（外链）
   - 意见反馈（打开帮助页）

5. **版权信息**
   - © 2026 微默. All rights reserved.
   - Made with ❤️

#### 设计原则
- 极简风格，无大 Logo
- 纯文字标题
- 功能性图标点缀
- Notion 式克制美学

---

### 11. 帮助与反馈页 (HelpPage)

#### 功能描述
提供常见问题解答和反馈入口

#### 页面结构
1. **顶部导航栏**
   - 左侧: 返回按钮
   - 居中: "帮助与反馈"

2. **常见问题**
   - FAQ 列表（手风琴展开）
   - 问题分类

3. **联系方式**
   - 邮箱
   - 微信公众号（可选）

4. **反馈表单**
   - 问题描述输入框
   - 提交按钮

---

### 12. 底部导航栏 (TabBar)

#### 功能描述
固定在底部的主导航

#### Tab 列表
1. **记录** (input)
   - 图标: PenLine
   - 跳转到快速输入页

2. **回顾** (review)
   - 图标: Clock
   - 跳转到笔记浏览页

3. **标签** (tags)
   - 图标: Hash
   - 跳转到标签管理页

4. **我的** (profile)
   - 图标: User
   - 跳转到个人中心页

#### 样式
- 高度: `64px`
- 白色背景
- 顶部边框
- 选中状态: 主色图标 + 文字
- 未选中: 灰色图标 + 文字

---

## 🎯 核心交互流程

### 1. 记录流程
```
打开应用 → 快速输入页 → 输入内容 → 选择标签 → 点击发送 → Toast 提示 → 清空输入
```

### 2. 浏览流程
```
切换到回顾 Tab → 查看笔记列表 → 点击标签筛选 → 左滑删除 → 确认删除
```

### 3. 标签管理流程
```
切换到标签 Tab → 查看所有标签 → 点击标签 → 查看标签详情 → 返回
```

### 4. 数据统计流程
```
个人中心 → 点击数据统计 → 查看详细数据 → 返回
```

### 5. 目标设置流程
```
个人中心 → 点击目标设置 → 修改目标值 → 保存 → 实时更新三环
```

---

## ✅ 已完成功能清单

### 核心功能 ✅
- [x] 快速输入页（支持标签添加）
- [x] 笔记浏览页（时间轴卡片流）
- [x] 标签管理页（扁平结构）
- [x] 个人中心页（数据面板 + 功能入口）
- [x] 随机回顾功能
- [x] 数据统计页（详细图表）
- [x] 记录日历页（月历视图）
- [x] 底部 Tab 导航

### 辅助功能 ✅
- [x] 目标设置（三环目标）
- [x] 回顾提醒设置
- [x] 关于微默页
- [x] 帮助与反馈页
- [x] 左滑删除笔记
- [x] 标签筛选
- [x] 数据持久化（LocalStorage）

### UI/UX ✅
- [x] Notion 风格配色
- [x] 极简克制美学
- [x] 统一的标题栏高度
- [x] 隐藏滚动条
- [x] Toast 提示
- [x] 空状态设计
- [x] 加载动画（Motion）

---

## 🚀 待优化功能（可选）

### 数据功能
- [ ] 导出笔记数据（JSON/Markdown）
- [ ] 导入笔记数据
- [ ] 搜索功能（全文搜索）

### 交互优化
- [ ] 笔记编辑功能
- [ ] 标签重命名
- [ ] 批量删除笔记
- [ ] 笔记排序方式（时间/标签）

### 云端功能
- [ ] 账号系统（登录/注册）
- [ ] 云端同步
- [ ] 多设备同步

### 高级功能
- [ ] Markdown 支持
- [ ] 图片附件（仅 PNG 格式）
- [ ] 语音输入
- [ ] 深色模式

---

## 📐 组件开发规范

### 页面组件命名
- 统一使用 `XxxPage.tsx` 格式
- 例如: `QuickInputPage.tsx`, `NoteListPage.tsx`

### Props 命名
- 使用 `XxxProps` 接口定义
- 例如: `interface QuickInputPageProps { ... }`

### 状态管理
- 使用 React Hooks (`useState`, `useEffect`)
- 复杂状态考虑提取自定义 Hook

### 样式规范
- 使用 Tailwind CSS 类名
- 不使用内联样式对象
- 避免自定义 font-size、font-weight（使用主题默认）
- 使用语义化的颜色变量（text-primary, bg-accent 等）

### 文件导入
- 使用 `@` 别名导入（映射到 `/src`）
- 例如: `import { Note } from '@/app/components/NoteCard'`

### 事件处理
- 使用 `handleXxx` 命名
- 例如: `handleSubmit`, `handleDelete`, `handleTagClick`

### 图片使用规范
- **必须使用 PNG 格式**
- **禁止使用 SVG 格式**
- **使用 ImageWithFallback 组件**
- **通过 unsplash_tool 获取图片**

---

## 🔧 开发指南

### 本地开发
```bash
npm install
npm run dev
```

### 构建部署
```bash
npm run build
npm run preview
```

### 数据清除
- 打开浏览器开发者工具
- Application → Local Storage → 清除对应键值

---

## 📝 版本历史

### v1.0.0 (2026.01)
- ✅ 完成所有核心功能
- ✅ 完成 Notion 风格改版
- ✅ 完成所有辅助功能页面
- ✅ 优化所有页面布局统一性
- ✅ 统一图片格式为 PNG

---

## 📮 联系方式

- **项目名称**: 微默 Weimo
- **版本**: v1.0.0
- **更新日期**: 2026.01

---

**Made with ❤️ for thoughtful note-taking**